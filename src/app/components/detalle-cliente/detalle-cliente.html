<!-- HEADER (√öNICO - fijo arriba) -->
<div class="fixed top-0 left-0 right-0 h-14 bg-red-900 z-50 flex items-center justify-center shadow-md">
  <h1 class="text-white font-extrabold text-2xl tracking-wide">MIVIVIENDA INMOBILIARIA</h1>
</div>

<!-- SIDEBAR √öNICO (oculto en m√≥vil) -->
<aside class="hidden md:block fixed top-14 left-0 bottom-0 w-32 bg-red-700 z-40"></aside>

<!-- CONTENEDOR PRINCIPAL -->
<div class="flex flex-col h-screen overflow-hidden">

  <div class="flex bg-gray-100 flex-1 overflow-auto">

    <main class="flex-1 p-4 md:p-10 md:ml-32 mt-16">

      <!-- CONTENEDOR BOT√ìN + T√çTULO ALINEADOS -->
      <div class="flex items-center justify-between mb-10 mt-2">

        <!-- Bot√≥n regresar (posici√≥n fija arriba a la izquierda, independiente del layout) -->
        <button (click)="irLogin()" class="absolute top-20 left-40 bg-gray-800 text-white px-6 py-2 rounded-full 
         shadow-md hover:bg-gray-900 transition flex items-center gap-2">
          <i class="fas fa-arrow-left"></i>
          <span>Volver</span>
        </button>

        <!-- T√çTULO ALINEADO A LA MISMA ALTURA -->
        <h2 class="text-3xl font-semibold text-gray-800 text-center flex-1">
          Detalle de Registro del Cliente
        </h2>

      </div>

      <!-- STEPS -->
      <div class="max-w-4xl mx-auto mb-10">
        <div class="flex items-center justify-between">

          <!-- Step 1 -->
          <div class="flex flex-col items-center w-1/4">
            <div class="w-10 h-10 flex items-center justify-center rounded-full font-bold shadow"
              [ngClass]="stepsCompletos.step1 ? 'bg-red-700 text-white' : 'bg-gray-300 text-gray-600'">
              1
            </div>
            <span class="mt-2 text-gray-700 font-medium text-center text-xs md:text-sm">
              Datos personales
            </span>
          </div>


          <!-- L√≠nea -->
          <div class="flex-1 h-1 bg-red-400 mx-1 md:mx-2"></div>

          <!-- Step 2 -->
          <div class="flex flex-col items-center w-1/4">
            <div class="w-10 h-10 flex items-center justify-center rounded-full font-bold shadow"
              [ngClass]="stepsCompletos.step2 ? 'bg-red-700 text-white' : 'bg-gray-300 text-gray-600'">
              2
            </div>
            <span class="mt-2 text-gray-700 font-medium text-center text-xs md:text-sm">
              Datos de contacto
            </span>
          </div>


          <!-- L√≠nea -->
          <div class="flex-1 h-1 bg-red-200 mx-1 md:mx-2"></div>

          <!-- Step 3 -->
          <div class="flex flex-col items-center w-1/4">
            <div class="w-10 h-10 flex items-center justify-center rounded-full font-bold shadow"
              [ngClass]="stepsCompletos.step3 ? 'bg-red-700 text-white' : 'bg-gray-300 text-gray-600'">
              3
            </div>
            <span class="mt-2 text-gray-700 font-medium text-center text-xs md:text-sm">
              Datos de cuenta
            </span>
          </div>


          <!-- L√≠nea -->
          <div class="flex-1 h-1 bg-red-200 mx-1 md:mx-2"></div>

          <!-- Step 4 -->
          <div class="flex flex-col items-center w-1/4">
            <div class="w-10 h-10 flex items-center justify-center rounded-full font-bold shadow"
              [ngClass]="stepsCompletos.step4 ? 'bg-red-700 text-white' : 'bg-gray-300 text-gray-600'">
              4
            </div>
            <span class="mt-2 text-gray-700 font-medium text-center text-xs md:text-sm">
              Informaci√≥n financiera
            </span>
          </div>

        </div>
      </div>

      <!-- CARD GENERAL -->
      <div class="bg-white rounded-3xl shadow-xl p-6 md:p-10 max-w-4xl mx-auto">

        <form [formGroup]="form" class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">

          <!-- SECCI√ìN: DATOS PERSONALES -->
          <h3 class="col-span-1 md:col-span-2 text-xl font-bold text-gray-700 mb-2 border-l-4 border-red-700 pl-3">
            Datos Personales
          </h3>

          <!-- Nombre -->
          <div>
            <label class="block text-gray-600 font-medium mb-1">Nombre:</label>
            <input type="text" formControlName="name" placeholder="Ingrese nombre"
              class="w-full border rounded-xl px-4 py-2 bg-gray-100"
              [ngClass]="{'border-red-600': form.get('name')?.invalid && form.get('name')?.touched}" />
          </div>

          <!-- Apellidos -->
          <div>
            <label class="block text-gray-600 font-medium mb-1">Apellidos:</label>
            <input type="text" formControlName="lastName" placeholder="Ingrese apellidos"
              class="w-full border rounded-xl px-4 py-2 bg-gray-100"
              [ngClass]="{'border-red-600': form.get('lastName')?.invalid && form.get('lastName')?.touched}" />
          </div>

          <!-- Fecha nacimiento -->
          <div>
            <label class="block text-gray-600 font-medium mb-1">Fecha de nacimiento:</label>
            <input type="date" formControlName="birthday" class="w-full border rounded-xl px-4 py-2 bg-gray-100"
              [ngClass]="{'border-red-600': form.get('birthday')?.invalid && form.get('birthday')?.touched}" />
            <p *ngIf="form.get('birthday')?.errors?.['menorEdad'] && form.get('birthday')?.touched"
              class="text-red-600 text-xs mt-1">Debe ser mayor de 18 a√±os.</p>
          </div>

          <!-- Estado civil -->
          <div>
            <label class="block text-gray-600 font-medium mb-1">Estado civil:</label>
            <select formControlName="maritalStatus" class="w-full border rounded-xl px-4 py-2 bg-gray-100"
              [ngClass]="{'border-red-600': form.get('maritalStatus')?.invalid && form.get('maritalStatus')?.touched}">
              <option value="">Seleccionar</option>
              <option>Soltero</option>
              <option>Casado</option>
              <option>Divorciado</option>
              <option>Viudo</option>
            </select>
          </div>

          <!-- DNI -->
          <div>
            <label class="block text-gray-600 font-medium mb-1">DNI:</label>
            <input type="text" maxlength="8" inputmode="numeric" (keypress)="soloNumeros($event)" formControlName="dni"
              placeholder="Ingrese DNI" class="w-full border rounded-xl px-4 py-2 bg-gray-100"
              [ngClass]="{'border-red-600': form.get('dni')?.invalid && form.get('dni')?.touched}" />
          </div>

          <!-- RUC -->
          <div>
            <label class="block text-gray-600 font-medium mb-1">RUC:</label>
            <input type="text" maxlength="11" inputmode="numeric" (keypress)="soloNumeros($event)" formControlName="ruc"
              placeholder="Ingrese RUC" class="w-full border rounded-xl px-4 py-2 bg-gray-100"
              [ngClass]="{'border-red-600': form.get('ruc')?.invalid && form.get('ruc')?.touched}" />
          </div>

          <!-- G√©nero -->
          <div>
            <label class="block text-gray-600 font-medium mb-1">G√©nero:</label>
            <select formControlName="gender" class="w-full border rounded-xl px-4 py-2 bg-gray-100"
              [ngClass]="{'border-red-600': form.get('gender')?.invalid && form.get('gender')?.touched}">
              <option value="">Seleccionar</option>
              <option>M</option>
              <option>F</option>
            </select>
          </div>

          <!-- DATOS DE CONTACTO -->
          <h3 class="col-span-1 md:col-span-2 text-xl font-bold text-gray-700 mt-6 mb-2 border-l-4 border-red-700 pl-3">
            Datos de Contacto
          </h3>

          <div>
            <label class="block text-gray-600 font-medium mb-1">Direcci√≥n:</label>
            <input type="text" formControlName="address" placeholder="Ingrese direcci√≥n"
              class="w-full border rounded-xl px-4 py-2 bg-gray-100"
              [ngClass]="{'border-red-600': form.get('address')?.invalid && form.get('address')?.touched}" />
          </div>

          <div>
            <label class="block text-gray-600 font-medium mb-1">Tel√©fono:</label>
            <input type="text" maxlength="9" inputmode="numeric" (keypress)="soloNumeros($event)"
              formControlName="phoneNumber" placeholder="Ingrese tel√©fono"
              class="w-full border rounded-xl px-4 py-2 bg-gray-100"
              [ngClass]="{'border-red-600': form.get('phoneNumber')?.invalid && form.get('phoneNumber')?.touched}" />
          </div>

          <div class="col-span-1 md:col-span-2">
            <label class="block text-gray-600 font-medium mb-1">Correo:</label>
            <input type="text" formControlName="email" placeholder="Ingrese correo"
              class="w-full border rounded-xl px-4 py-2 bg-gray-100"
              [ngClass]="{'border-red-600': form.get('email')?.invalid && form.get('email')?.touched}" />
          </div>

          <!-- DATOS DE CUENTA -->
          <h3 class="col-span-1 md:col-span-2 text-xl font-bold text-gray-700 mt-6 mb-2 border-l-4 border-red-700 pl-3">
            Datos de Cuenta
          </h3>

          <div>
            <label class="block text-gray-600 font-medium mb-1">Usuario:</label>
            <input type="text" formControlName="username" placeholder="Ingrese usuario"
              class="w-full border rounded-xl px-4 py-2 bg-gray-100"
              [ngClass]="{'border-red-600': form.get('username')?.invalid && form.get('username')?.touched}" />
          </div>

          <div>
            <label class="block text-gray-600 font-medium mb-1">Contrase√±a:</label>

            <div class="relative">
              <input [type]="mostrarPass ? 'text' : 'password'" formControlName="password"
                placeholder="Ingrese contrase√±a" class="w-full border rounded-xl px-4 py-2 bg-gray-100 pr-12"
                [ngClass]="{'border-red-600': form.get('password')?.invalid && form.get('password')?.touched}" />

              <!-- Bot√≥n ojo -->
              <button type="button" (click)="togglePassword()"
                class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-600 hover:text-gray-800">
                üëÅÔ∏è
              </button>
            </div>
          </div>

          <!-- INFORMACI√ìN FINANCIERA -->
          <h3 class="col-span-1 md:col-span-2 text-xl font-bold text-gray-700 mt-6 mb-2 border-l-4 border-red-700 pl-3">
            Informaci√≥n Financiera
          </h3>

          <div>
            <label class="block text-gray-600 font-medium mb-1">Tipo de moneda:</label>
            <select formControlName="currencyType" class="w-full border rounded-xl px-4 py-2 bg-gray-100"
              [ngClass]="{'border-red-600': form.get('currencyType')?.invalid && form.get('currencyType')?.touched}">
              <option value="">Seleccionar</option>
              <option>PEN</option>
              <option>USD</option>
            </select>
          </div>

          <div>
            <label class="block text-gray-600 font-medium mb-1">Ingresos Mensuales:</label>

            <div class="relative">
              <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 font-semibold">
                {{ form.get('currencyType')?.value === 'USD' ? '$' :
                (form.get('currencyType')?.value === 'PEN' ? 'S/' : '') }}
              </span>

              <input type="text" formControlName="monthlyIncome" placeholder="0.00"
                (keypress)="soloNumerosDecimales($event)" (input)="limpiarValor($event)" (blur)="formatearAlSalir()"
                class="w-full border rounded-xl pl-10 px-4 py-2 bg-gray-100"
                [ngClass]="{'border-red-600': form.get('monthlyIncome')?.invalid && form.get('monthlyIncome')?.touched}" />
            </div>
          </div>

        </form>
      </div>

      <!-- BOT√ìN REGISTRAR -->
      <div *ngIf="!modoPerfil" class="flex justify-center mt-10 mb-10">
        <button (click)="registrar()"
          class="bg-red-800 text-white px-10 py-3 rounded-full font-semibold shadow-lg hover:bg-red-900 transition w-full md:w-auto">
          Registrar
        </button>
      </div>

    </main>

  </div>
</div>